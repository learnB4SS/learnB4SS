<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="learnB4SS">
<title>Application to regression II - Priors and Bayesian updating • learnB4SS</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Application to regression II - Priors and Bayesian updating">
<meta property="og:description" content="learnB4SS">
<meta property="og:image" content="https://learnb4ss.github.io/learnB4SS/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">learnB4SS</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.7.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/contrasts.html">Factors, coding and contrasts</a>
    <a class="dropdown-item" href="../articles/ex_03.html">Application to regression II - Priors and Bayesian updating</a>
    <a class="dropdown-item" href="../articles/ex_06.html">Application to regression III - More Bayesian inference</a>
    <a class="dropdown-item" href="../articles/ex_08.html">Application to regression IV - Leveling up to hierarchical models</a>
    <a class="dropdown-item" href="../articles/faqs.html">FAQs</a>
    <a class="dropdown-item" href="../articles/full-analysis.html">Fully worked-out analysis using a Bayesian regression with brms</a>
    <a class="dropdown-item" href="../articles/glossary.html">Glossary</a>
    <a class="dropdown-item" href="../articles/install-brms.html">How to install brms and dependecies</a>
    <a class="dropdown-item" href="../articles/install-learnb4ss.html">How to install the learnB4SS package</a>
    <a class="dropdown-item" href="../articles/understand-priors.html">Understand and explore priors</a>
    <a class="dropdown-item" href="../articles/why-bayes.html">Why Bayesian?</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/learnB4SS/learnB4SS/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Application to regression II - Priors and Bayesian updating</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/learnB4SS/learnB4SS/blob/HEAD/vignettes/ex_03.Rmd" class="external-link"><code>vignettes/ex_03.Rmd</code></a></small>
      <div class="d-none name"><code>ex_03.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="load-data">Load data<a class="anchor" aria-label="anchor" href="#load-data"></a>
</h2>
<p>Let’s load the packages and data we are going to use.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Packages</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/paul-buerkner/brms" class="external-link">brms</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/learnB4SS/learnB4SS" class="external-link">learnB4SS</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/twolodzko/extraDistr" class="external-link">extraDistr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"polite"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="which-priors">Which priors?<a class="anchor" aria-label="anchor" href="#which-priors"></a>
</h2>
<p>Depending on the type of model you are running and the nature of the
included predictors, you will have to specify a certain set of
priors.</p>
<p>You can easily learn which priors you can specify in a model by using
the function <code><a href="https://paul-buerkner.github.io/brms/reference/get_prior.html" class="external-link">brms::get_prior()</a></code>. You will try it out in a
second.</p>
<p>We are trying to find out what kind of effect politeness has (if any)
on articulation rate.</p>
<p>As a first approximation, we could start with the following
model:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Don't run me yet!</span></span>
<span><span class="va">m1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://paul-buerkner.github.io/brms/reference/brm.html" class="external-link">brm</a></span><span class="op">(</span></span>
<span>  formula <span class="op">=</span> <span class="va">articulation_rate</span> <span class="op">~</span> <span class="va">attitude</span>,</span>
<span>  data <span class="op">=</span> <span class="va">polite</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>To find out which priors are available in this model, you just need
to specify the model formula <em>and</em> the data in the
<code><a href="https://paul-buerkner.github.io/brms/reference/get_prior.html" class="external-link">get_prior()</a></code> function.</p>
<p>Go ahead and fill in the following code snippet and run it when
you’re done to get a list of priors! You’ll learn how to interpret the
output in the next section.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://paul-buerkner.github.io/brms/reference/get_prior.html" class="external-link">get_prior</a></span><span class="op">(</span></span>
<span> formula <span class="op">=</span> <span class="va">...</span>,</span>
<span> data <span class="op">=</span> <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="understand-the-syntax">Understand the syntax<a class="anchor" aria-label="anchor" href="#understand-the-syntax"></a>
</h2>
<p>When you run <code><a href="https://paul-buerkner.github.io/brms/reference/get_prior.html" class="external-link">get_prior()</a></code>, a table is returned with a few
columns. Each row corresponds to one prior (and to one model
parameter).</p>
<p>For now, you can focus just on the first three (<code>prior</code>,
<code>class</code>, <code>coef</code>).</p>
<div class="section level3">
<h3 id="prior">
<code>prior</code><a class="anchor" aria-label="anchor" href="#prior"></a>
</h3>
<p>The column <code>prior</code> tells you which prior probability
distributions are set as default by brms. For our model, the first two
default priors are <code>(flat)</code>, i.e. uniform distributions (all
values are equally probable). The other two priors are
Student-<em>t</em> distributions. (more on prior specification
below).</p>
<p>But we will want to change them all to something more appropriate (we
will talk about what makes an appropriate prior tomorrow).</p>
</div>
<div class="section level3">
<h3 id="class">
<code>class</code><a class="anchor" aria-label="anchor" href="#class"></a>
</h3>
<p>The columns <code>class</code> and <code>coef</code> are the ones you
should check. <code>class</code> indicates the type of model parameter:
<code>Intercept</code> is the model intercept,<code>b</code> indicates a
predictor term, and <code>sigma</code> the model’s residual standard
deviation.</p>
</div>
<div class="section level3">
<h3 id="coef">
<code>coef</code><a class="anchor" aria-label="anchor" href="#coef"></a>
</h3>
<p>The third column, <code>coef</code> indicates to which model
predictor the prior is assigned. In our model above, there’s only one
predictor (<code>attitude</code>), and that’s what you can see in the
<code><a href="https://paul-buerkner.github.io/brms/reference/get_prior.html" class="external-link">get_prior()</a></code> output.</p>
<p>Since <code>attitude</code> has only two levels (<code>inf</code> and
<code>pol</code>), we only have one parameter for the second level
<code>pol</code> (the level <code>inf</code> is included in the
<code>Intercept</code>).</p>
</div>
</div>
<div class="section level2">
<h2 id="specify-your-priors">Specify your priors<a class="anchor" aria-label="anchor" href="#specify-your-priors"></a>
</h2>
<p>It’s quite easy to specify priors with brms. You just need to use the
function <code><a href="https://paul-buerkner.github.io/brms/reference/set_prior.html" class="external-link">prior()</a></code>!</p>
<p>Since we need to specify more than one prior, we need multiple calls
to <code><a href="https://paul-buerkner.github.io/brms/reference/set_prior.html" class="external-link">prior()</a></code>, concatenated with <code><a href="https://rdrr.io/r/base/c.html" class="external-link">c()</a></code>. Like in the
following example:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_priors</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://paul-buerkner.github.io/brms/reference/set_prior.html" class="external-link">prior</a></span><span class="op">(</span><span class="va">...</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://paul-buerkner.github.io/brms/reference/set_prior.html" class="external-link">prior</a></span><span class="op">(</span><span class="va">...</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://paul-buerkner.github.io/brms/reference/set_prior.html" class="external-link">prior</a></span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Within the function <code><a href="https://paul-buerkner.github.io/brms/reference/set_prior.html" class="external-link">prior()</a></code>, you need to specify the
prior distribution with its parameters, the prior class
(<code>class</code>), and the prior coefficient (<code>coef</code>) if
any.</p>
<p>For our simple model above, we need three priors:</p>
<ul>
<li>The prior of the <code>Intercept</code>.</li>
<li>The prior of the slope for <code>attitudepol</code>.</li>
<li>The prior for the standard deviation <code>sigma</code>.</li>
</ul>
<p>Remember that <code><a href="https://paul-buerkner.github.io/brms/reference/get_prior.html" class="external-link">get_prior()</a></code> also lists class-generic
priors (in our case, the prior for <code>class = b</code>), but you
don’t need to specify those if you specify the prior for the coefficient
(in our case, <code>class = b, coef = attitudepol</code>).</p>
<p>We’ll give you a head start by telling you which priors we can use in
this model:</p>
<ul>
<li>
<code>Intercept</code>: a Normal distribution with mean = 0 and sd =
15.</li>
<li>
<code>attitudepol</code>: a Normal distribution with mean = 0 and sd
= 10.</li>
<li>
<code>sigma</code>: a Half-Cauchy distribution with mean = 0 and sd
= 1.</li>
</ul>
<p>The Half Cauchy distribution is something we haven’t seen yet. This
distribution is helpful for estimating measures like standard
deviations. It’s “half” because only the positive values are taken into
consideration, since the standard deviation can only ever be
positive.</p>
<p>This is how a Half Cauchy distribution with mean 0 and standard
deviation 1 looks like:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">10</span>, by <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span></span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/extraDistr/man/HalfCauchy.html" class="external-link">dhcauchy</a></span><span class="op">(</span><span class="va">x</span>, sigma <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="st">"Articulation rate (syl/s)"</span>, y <span class="op">=</span> <span class="st">"Density"</span>,</span>
<span>    title <span class="op">=</span> <span class="st">"Half Cauchy distribution"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/expression.html" class="external-link">expression</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">mu</span>, <span class="st">"=0"</span>, <span class="st">", "</span>, <span class="va">sigma</span>, <span class="st">"=1"</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; Warning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Please use `linewidth` instead.</span></span>
<span><span class="co">#&gt; <span style="color: #555555;">This warning is displayed once every 8 hours.</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">Call `lifecycle::last_lifecycle_warnings()` to see where this warning was</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">generated.</span></span></span></code></pre></div>
<p><img src="ex_03_files/figure-html/half-cauchy-1.png" width="700"></p>
<p>As you can see, the probability of getting bigger values drops very
quickly while moving away from 0. This ensures that the prior for the
standard deviation has a “regularising” effect (we will talk about
regularising priors tomorrow), which helps brms to estimate the standard
deviation.</p>
<p>Now go ahead and fill in the following code snippet with the right
parameters and arguments:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_priors</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://paul-buerkner.github.io/brms/reference/set_prior.html" class="external-link">prior</a></span><span class="op">(</span><span class="fu">normal</span><span class="op">(</span><span class="va">...</span>, <span class="va">...</span><span class="op">)</span>, class <span class="op">=</span> <span class="va">Intercept</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://paul-buerkner.github.io/brms/reference/set_prior.html" class="external-link">prior</a></span><span class="op">(</span><span class="fu">normal</span><span class="op">(</span><span class="va">...</span>, <span class="va">...</span><span class="op">)</span>, class <span class="op">=</span> <span class="va">b</span>, coef <span class="op">=</span> <span class="va">...</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://paul-buerkner.github.io/brms/reference/set_prior.html" class="external-link">prior</a></span><span class="op">(</span><span class="fu">cauchy</span><span class="op">(</span><span class="fl">0</span>, <span class="va">...</span><span class="op">)</span>, class <span class="op">=</span> <span class="va">...</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>And now let’s fit the model using our priors!</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">b_mod_01</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://paul-buerkner.github.io/brms/reference/brm.html" class="external-link">brm</a></span><span class="op">(</span></span>
<span>  <span class="va">articulation_rate</span> <span class="op">~</span> <span class="va">attitude</span>,</span>
<span>  data <span class="op">=</span> <span class="va">polite</span>,</span>
<span>  prior <span class="op">=</span> <span class="va">my_priors</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><br></p>
<!--
Solutions to exercise 03.

get_prior(
 formula = articulation_rate ~ attitude,
 data = polite
)

my_priors <- c(
  prior(normal(0, 15), class = Intercept),
  prior(normal(0, 10), class = b, coef = attitudepol),
  prior(cauchy(0, 1), class = sigma)
)
-->
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Stefano Coretta, Joseph V. Casillas, Timo Roettger.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>

<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="learnB4SS">
<title>How to install brms and dependecies • learnB4SS</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="How to install brms and dependecies">
<meta property="og:description" content="learnB4SS">
<meta property="og:image" content="https://learnb4ss.github.io/learnB4SS/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">learnB4SS</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.7.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/contrasts.html">Factors, coding and contrasts</a>
    <a class="dropdown-item" href="../articles/ex_03.html">Application to regression II - Priors and Bayesian updating</a>
    <a class="dropdown-item" href="../articles/ex_06.html">Application to regression III - More Bayesian inference</a>
    <a class="dropdown-item" href="../articles/ex_08.html">Application to regression IV - Leveling up to hierarchical models</a>
    <a class="dropdown-item" href="../articles/faqs.html">FAQs</a>
    <a class="dropdown-item" href="../articles/full-analysis.html">Fully worked-out analysis using a Bayesian regression with brms</a>
    <a class="dropdown-item" href="../articles/glossary.html">Glossary</a>
    <a class="dropdown-item" href="../articles/install-brms.html">How to install brms and dependecies</a>
    <a class="dropdown-item" href="../articles/install-learnb4ss.html">How to install the learnB4SS package</a>
    <a class="dropdown-item" href="../articles/understand-priors.html">Understand and explore priors</a>
    <a class="dropdown-item" href="../articles/why-bayes.html">Why Bayesian?</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/learnB4SS/learnB4SS/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>How to install brms and dependecies</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/learnB4SS/learnB4SS/blob/HEAD/vignettes/install-brms.Rmd" class="external-link"><code>vignettes/install-brms.Rmd</code></a></small>
      <div class="d-none name"><code>install-brms.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>When you fit a model with brms, the package calls <a href="https://mc-stan.org/users/interfaces/rstan" class="external-link">Rstan</a> which is an
R interface to the statistical programming language <a href="https://mc-stan.org" class="external-link">Stan</a>.</p>
<p>The nice thing about brms is that it uses a syntax for specifying
model formulae that is based on the syntax of the commonly known lme4
package. The lme4-like syntax of brms is converted into Stan code
automatically, so you won’t have to learn Stan.<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;brms is &lt;em&gt;very&lt;/em&gt; flexible, but if you need to fit
highly customised models (e.g., …), then learning Stan is recommended.
It is possible to get the Stan code from the brms syntax and modify it
to your liking before running it, all from within R.&lt;/p&gt;"><sup>1</sup></a></p>
<p>Stan is built in the programming language C++ and models have to be
compiled using C++ to be run. This is all taken care of by brms, so you
just need to run <code>brm(...)</code> and brms will do its magic.</p>
<p>However, since the models have to be compiled in C++, you need to set
up your computer so that it can use C++. This has to be done only once,
before installing brms, and the procedure depends on your operating
system. Continue reading for detailed instructions.</p>
</div>
<div class="section level2">
<h2 id="getting-help">Getting help<a class="anchor" aria-label="anchor" href="#getting-help"></a>
</h2>
<p><strong>If you get stuck</strong> at any point in the installation
process, please contact us at <a href="mailto:learnb4ss@gmail.com" class="email">learnb4ss@gmail.com</a> as soon as possible. <u><em>It is
of out-most importance that by the start of the workshop everything
works fine on your computer</em></u>, so we very strongly recommend to
go through the installation process as early as possible (e.g. at least
two weeks prior to the workshop).</p>
</div>
<div class="section level2">
<h2 id="r-and-rstudio">R and RStudio<a class="anchor" aria-label="anchor" href="#r-and-rstudio"></a>
</h2>
<p>⚠️ <strong>IMPORTANT!</strong> We <u><strong>very
strongly</strong></u> recommend you to <strong>update R to 4.x and
RStudio to the latest</strong> release. This combo will ensure a
smoother installation process and use. We will not be able to provide
support for R versions earlier than 4.0.</p>
<p>To <strong>install/update R</strong>, find the installation disk
depending on your operating system here: <a href="https://cloud.r-project.org" class="external-link uri">https://cloud.r-project.org</a>. (If you have macOS with an
M1 chip, make sure to install R 4.1.0 for arm64)</p>
<p>We also highly recommend installing RStudio, as we will provide you
with interactive RMarkdown files as additional resources that are best
viewed and used in RStudio. Please, <strong>download RStudio</strong> or
update it to the latest version: <a href="https://www.rstudio.com/products/rstudio/download/#download" class="external-link uri">https://www.rstudio.com/products/rstudio/download/#download</a>.</p>
<p>The following sections explain how to configure and install further
software that will be necessary for workshop activities. The
instructions vary depending on your operating system, so check out the
section that is relevant to you. You will perform the following
steps:</p>
<ol style="list-style-type: decimal">
<li>Configure the C++ toolchain (needed for Stan).</li>
<li>Install Rstan (and Stan).</li>
<li>Install brms.</li>
</ol>
<p>If you have already installed brms and its dependencies before, then
you can skip the installation and just check that everything works by
running
<code>example(stan_model, package = "rstan", run.dontrun = TRUE)</code>
in the console.</p>
</div>
<div class="section level2">
<h2 id="macos">macOS<a class="anchor" aria-label="anchor" href="#macos"></a>
</h2>
<div class="section level3">
<h3 id="configure-the-c-toolchain">Configure the C++ toolchain<a class="anchor" aria-label="anchor" href="#configure-the-c-toolchain"></a>
</h3>
<p>To configure the C++ toolchain on macOS, you just need to install the
Xcode Command Line Tools and <code>gfortran</code>.</p>
<p>First, if you have the files <code>~/.R/Makevars</code> and/or
<code>~/.Renviron</code>, save a copy in a different location (like your
desktop) and delete them.</p>
<p>If you don’t know what these files are or if you have them, go to
<code>Finder &gt; Go &gt; Home</code>, which takes you to your home
directory, and press <code>SHIFT + CMD + .</code> to show hidden files
(i.e. files starting with a full stop <code>.</code>) if you can’t see
them already. Now search among the hidden files and if you see a folder
named <code>.R/</code> and/or a file <code>.Renviron</code>, copy them
to your desktop and delete the original copies from your home
directory.</p>
<p>If you have important configurations you want to keep, you can try to
put the files back <strong>after</strong> you completed the installation
of brms and checked that everything works fine.</p>
<p>To install the <strong>Xcode Command Line Tools</strong>, run the
following in the Terminal (open
<code>Finder &gt; Applications &gt; Terminal</code>, type in the
following command and press <code>ENTER</code>):</p>
<pre><code><span><span class="va">xcode</span><span class="op">-</span><span class="va">select</span> <span class="op">-</span><span class="op">-</span><span class="va">install</span></span></code></pre>
<p>macOS will download and install the Xcode CLT (it will take a while,
make sure you have a stable internet connection).</p>
<p>If your Mac has an Intel chip, you need to install <strong>gfortran
v8.2</strong> (for Mojave) <u><strong>independent of your macOS
version</strong></u>. You can download the installer from <a href="https://github.com/fxcoudert/gfortran-for-macOS/releases/tag/8.2" class="external-link uri">https://github.com/fxcoudert/gfortran-for-macOS/releases/tag/8.2</a>.</p>
<p>If your Mac has an Apple M1 chip, you will need to install
<strong>gfortran v11</strong>. You can download it from here: <a href="https://github.com/fxcoudert/gfortran-for-macOS/releases/tag/11-arm-alpha2" class="external-link uri">https://github.com/fxcoudert/gfortran-for-macOS/releases/tag/11-arm-alpha2</a>
(download the <code>.pkg</code> package listed under Assets at the
bottom of the page).</p>
</div>
<div class="section level3">
<h3 id="install-rstan">Install Rstan<a class="anchor" aria-label="anchor" href="#install-rstan"></a>
</h3>
<p>Just in case you previously tried to install Rstan without success,
run the following code to clean installations and configuration
files.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/remove.packages.html" class="external-link">remove.packages</a></span><span class="op">(</span><span class="st">"rstan"</span><span class="op">)</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.exists</a></span><span class="op">(</span><span class="st">".RData"</span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.remove</a></span><span class="op">(</span><span class="st">".RData"</span><span class="op">)</span></span></code></pre></div>
<p>Restart R.</p>
<p>Assuming you are using R 4.0 or later, just run in the R console:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"rstan"</span><span class="op">)</span></span></code></pre></div>
<p>Now, verify the installation by running:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/example.html" class="external-link">example</a></span><span class="op">(</span><span class="va">stan_model</span>, package <span class="op">=</span> <span class="st">"rstan"</span>, run.dontrun <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>If the model compiles and starts sampling like in the gif below, you
are set.</p>
<p><img src="rstan.gif" width="400px" style="display: block; margin: auto;"></p>
<p>In case you get the following warning, it is safe to ignore it.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Warning message:</span></span>
<span><span class="co"># In system(paste(CXX, ARGS), ignore.stdout = TRUE, ignore.stderr = TRUE) :</span></span>
<span><span class="co">#  'C:/rtools40/usr/mingw_/bin/g++' not found</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="install-brms">Install brms<a class="anchor" aria-label="anchor" href="#install-brms"></a>
</h3>
<p>Install brms from CRAN simply with:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"brms"</span><span class="op">)</span></span></code></pre></div>
<p>🎉 Congrats! You are now ready to run Bayesian regressions.</p>
</div>
</div>
<div class="section level2">
<h2 id="windows">Windows<a class="anchor" aria-label="anchor" href="#windows"></a>
</h2>
<div class="section level3">
<h3 id="configure-the-c-toolchain-1">Configure the C++ toolchain<a class="anchor" aria-label="anchor" href="#configure-the-c-toolchain-1"></a>
</h3>
<p>To configure the C++ toolchain, follow the instructions here for your
R version (3.6 or 4.0): <a href="https://github.com/stan-dev/rstan/wiki/Configuring-C---Toolchain-for-Windows" class="external-link uri">https://github.com/stan-dev/rstan/wiki/Configuring-C---Toolchain-for-Windows</a>.</p>
</div>
<div class="section level3">
<h3 id="install-rstan-1">Install Rstan<a class="anchor" aria-label="anchor" href="#install-rstan-1"></a>
</h3>
<p>Just in case you previously tried to install Rstan without success,
run the following code to clean installations and configuration
files.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/remove.packages.html" class="external-link">remove.packages</a></span><span class="op">(</span><span class="st">"rstan"</span><span class="op">)</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.exists</a></span><span class="op">(</span><span class="st">".RData"</span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.remove</a></span><span class="op">(</span><span class="st">".RData"</span><span class="op">)</span></span></code></pre></div>
<p>Restart R.</p>
<p>Then just run:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"rstan"</span>, repos <span class="op">=</span> <span class="st">"https://cloud.r-project.org/"</span>, dependencies <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>Now, verify the installation by running:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/example.html" class="external-link">example</a></span><span class="op">(</span><span class="va">stan_model</span>, package <span class="op">=</span> <span class="st">"rstan"</span>, run.dontrun <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>If the model compiles and starts sampling like in the gif below, you
are set.</p>
<p><img src="rstan.gif" width="400px" style="display: block; margin: auto;"></p>
<p>In case you get the following warning, it is safe to ignore it.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Warning message:</span></span>
<span><span class="co"># In system(paste(CXX, ARGS), ignore.stdout = TRUE, ignore.stderr = TRUE) :</span></span>
<span><span class="co">#  'C:/rtools40/usr/mingw_/bin/g++' not found</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="install-brms-1">Install brms<a class="anchor" aria-label="anchor" href="#install-brms-1"></a>
</h3>
<p>Install brms from CRAN simply with:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"brms"</span><span class="op">)</span></span></code></pre></div>
<p>🎉 Congrats! You are now ready to run Bayesian regressions.</p>
</div>
</div>
<div class="section level2">
<h2 id="linux">Linux<a class="anchor" aria-label="anchor" href="#linux"></a>
</h2>
<div class="section level3">
<h3 id="install-rstan-and-configure-the-c-toolchain">Install Rstan and configure the C++ toolchain<a class="anchor" aria-label="anchor" href="#install-rstan-and-configure-the-c-toolchain"></a>
</h3>
<p>On Linux, you have the option to install a pre-built Rstan binary or
to build it from source.</p>
<p>If you decide to install the <strong>pre-built binary</strong>,
follow the instructions here: <a href="https://github.com/stan-dev/rstan/wiki/Configuring-C-Toolchain-for-Linux" class="external-link uri">https://github.com/stan-dev/rstan/wiki/Configuring-C-Toolchain-for-Linux</a>,
and you will have Rstan.</p>
<p>If you would rather <strong>build it from source</strong>, then:</p>
<ul>
<li>follow the instructions here (as above): <a href="https://github.com/stan-dev/rstan/wiki/Configuring-C-Toolchain-for-Linux" class="external-link uri">https://github.com/stan-dev/rstan/wiki/Configuring-C-Toolchain-for-Linux</a>-
and then build from source by following the instructions here: <a href="https://github.com/stan-dev/rstan/wiki/Installing-RStan-from-Source#linux" class="external-link uri">https://github.com/stan-dev/rstan/wiki/Installing-RStan-from-Source#linux</a>
</li>
</ul>
</div>
<div class="section level3">
<h3 id="install-brms-2">Install brms<a class="anchor" aria-label="anchor" href="#install-brms-2"></a>
</h3>
<p>Install brms from CRAN simply with:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"brms"</span><span class="op">)</span></span></code></pre></div>
<p>🎉 Congrats! You are now ready to run Bayesian regressions.</p>
</div>
</div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Stefano Coretta, Joseph V. Casillas, Timo Roettger.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
